Техническое описание
API v4 (“интеграция в 1С”)
=====================================================
портала https://zachestnyibiznes.ru

###Подключение
Для подключения к API v4 (“интеграция в 1С”) необходимо зарегистрировать приложение в личном кабинете (https://zachestnyibiznes.ru/user) и связаться с представителями портала для активации доступа.

###Взаимодействие
Взаимодействие происходит по протоколу https в виде POST запросов.

В API v4 (“интеграция в 1С”) доступны 4 метода:
* Установка сессии клиента (авторизация)
* Получение списка компаний по строке запроса
* Получение карточки компании по id
* Получение финансовой отчётности (ф1, ф2) компании по id

Обязательные параметры:
* api_key (POST) - ключ api (доступен в личном кабинете)
* id_client (POST) - id клиента
* string (POST) - строка запроса (только для получения списка)
* id (POST) - id компании (только для получения карточки и фин. отчетности)

Необязательные параметры:
* page (GET) - страница списка (только для получения списка)
* \_format (GET) - запрос формата ответа (json/xml)

Формат ответа представлен в JSON.

###Ограничения
* Лимит на открытие сессий с одного ip - 1 раз в 3 сек
* Лимит rps = 1 (в рамках одного id_client)
* Метод запроса - только POST метод
* Доступ к API v4 - только по api_key и id_client в рамках открытой сессии
* Сессия клиента создаётся на 1 час, в случае авторизации при существующей сессии выдаётся ошибка
* Формат ответа - JSON / XML (Названия атрибутов соответствуют названиям модели данных ФНС: https://www.nalog.ru/rn77/about_fts/docs/5702872/)
* Наличие в ответе рекламных материалов, требуемых к размещению
* Максимальная страница - 10
* Ошибки возвращаются в формате JSON / XML, например:

```json
{
  "name": "Too Many Requests",
  "message": "Превышен лимит запросов.",
  "code": 0,
  "status": 429
}
```

###Примеры
Пример авторизации:
> Запрос (POST)  
> https://api.zachestnyibiznes.ru/v4/data/set-client-session  
> Параметры  
> 	api_key 	: test_api_key  
> 	id_client 	: user@mail.com  
> Ответ (JSON)

Пример получения списка компаний по запросу
> Запрос (POST)  
> https://api.zachestnyibiznes.ru/v4/data/search?page=2&_format=xml  
> Параметры  
> api_key : test_api_key  
> id_client : user@mail.com  
> string : зао масква  
> Ответ (XML)  
